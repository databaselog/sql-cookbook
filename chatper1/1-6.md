## 1.6 Referencing an Aliased Column in the WHERE Clause

### 퀴즈

~~~sql
select sal as salary, comm as commission
from emp
where salary < 5000
~~~

위 쿼리 수행시 `Unknown column 'salary' in where clause` 에러가 발생합니다. **원인을 생각해보고 솔루션을 제안해봅시다.**

<br>

### 쿼리의 실행 순서

우리가 SQL 문법에 맞춰 작성하는 쿼리의 실제 수행 순서는 아래와 같습니다.

~~~sql
FROM (ON), JOIN > WHERE > GROUP BY > HAVING > SELECT (DISTINCT) > ORDER BY
~~~

위 예시를 보면 원인을 알 수 있습니다. **조건문에 내가 지정한 alias를 쓰게될 경우**,  `WHERE` 절이 `SELECT` 보다 먼저 실행되기 때문에 컬럼명이 존재하지 않는다고 에러가 출력되는것입니다.

<br>

### Best Practice

가장 좋은 솔루션은 inline view를 사용하여 해결하는것입니다.

~~~sql
1 select x.*
2 from ( select sal as salary, comm as commission from emp ) x
3 where salary < 5000
~~~
